[gd_scene load_steps=17 format=3 uid="uid://5k1o5ctvtah6"]

[ext_resource type="Script" path="res://Scenes/Enemy/enemy.gd" id="1_phvpf"]
[ext_resource type="PackedScene" uid="uid://cssrnoqqr5d0y" path="res://models/enemymodel.blend" id="2_7mos3"]
[ext_resource type="PackedScene" uid="uid://cf1dcxwv6bvl3" path="res://models/Pistol.glb" id="2_u1s3k"]
[ext_resource type="Texture2D" uid="uid://vwob30tkwej4" path="res://addons/kenney_particle_pack/star_06.png" id="3_on872"]
[ext_resource type="AudioStream" uid="uid://cyp0dip0hu5qd" path="res://audio/gunshot.ogg" id="4_vk23e"]
[ext_resource type="PackedScene" uid="uid://b7ka2br6c8rt" path="res://Scenes/Enemy/enemyrifle.blend" id="5_fla7h"]

[sub_resource type="GDScript" id="GDScript_t1skp"]
script/source = "extends Node3D

#@onready var nav_agent = $NavigationAgent3D

# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta: float) -> void:
	pass
"

[sub_resource type="Gradient" id="Gradient_or8bq"]
offsets = PackedFloat32Array(0, 0.141221, 1)
colors = PackedColorArray(0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_is51c"]
gradient = SubResource("Gradient_or8bq")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_rw2b2"]
angle_min = 45.0
angle_max = 45.0
gravity = Vector3(0, 0, 0)
color_ramp = SubResource("GradientTexture1D_is51c")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_4smqo"]
transparency = 1
shading_mode = 0
vertex_color_use_as_albedo = true
albedo_color = Color(1, 0.960784, 0.670588, 1)
albedo_texture = ExtResource("3_on872")
billboard_mode = 3
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false

[sub_resource type="PlaneMesh" id="PlaneMesh_8vdlg"]
material = SubResource("StandardMaterial3D_4smqo")
size = Vector2(0.5, 0.5)
orientation = 2

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_q7x2r"]

[sub_resource type="Animation" id="Animation_d17cx"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("enemymodel/Pistol:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(-0.0386105, 1.33318, 0.537808)]
}
tracks/1/type = "position_3d"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("enemyrifle")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = PackedFloat32Array(0, 1, 0.104136, 0.911454, -0.682338)

[sub_resource type="Animation" id="Animation_30v3c"]
resource_name = "bob"
length = 0.75
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("enemymodel/Pistol:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.233333, 0.366667, 0.566667, 0.733333),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(-0.0386105, 1.27359, 0.537808), Vector3(-0.0386105, 1.30742, 0.537808), Vector3(-0.0386105, 1.22834, 0.495484), Vector3(-0.0541507, 1.34137, 0.53161), Vector3(-0.0386105, 1.27359, 0.537808)]
}
tracks/1/type = "position_3d"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("enemyrifle")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = PackedFloat32Array(0, 1, 0.104136, 0.911454, -0.682338, 0.166667, 1, 0.104136, 0.945904, -0.682338, 0.3, 1, 0.104136, 0.865318, -0.682338, 0.433333, 1, 0.104136, 0.94606, -0.682338, 0.533333, 1, 0.104136, 0.978338, -0.682338, 0.6, 1, 0.104136, 0.953565, -0.682338, 0.733333, 1, 0.104136, 0.910885, -0.682338)

[sub_resource type="AnimationLibrary" id="AnimationLibrary_mudx8"]
_data = {
"RESET": SubResource("Animation_d17cx"),
"bob": SubResource("Animation_30v3c")
}

[node name="Enemy" type="CharacterBody3D" groups=["enemy"]]
script = ExtResource("1_phvpf")

[node name="enemymodel" parent="." instance=ExtResource("2_7mos3")]
transform = Transform3D(-1.3, 0, -1.1365e-07, 0, 1.3, 0, 1.1365e-07, 0, -1.3, 0, -0.80152, 0)

[node name="Skeleton3D" parent="enemymodel/Armature" index="0"]
bones/0/position = Vector3(1.18171, 0.522263, -89.9807)
bones/0/rotation = Quaternion(-0.632042, -0.0628082, 0.0576454, 0.770231)
bones/1/rotation = Quaternion(0.0013637, -0.0529765, 0.0255621, 0.998268)
bones/2/rotation = Quaternion(0.022892, -0.0159282, 0.00235582, 0.999608)
bones/3/rotation = Quaternion(0.0228105, -0.0160181, 0.0021931, 0.999609)
bones/4/position = Vector3(2.38417e-07, 14.3081, 1.60153e-05)
bones/4/rotation = Quaternion(0.10561, 0.0196837, 0.0287561, 0.993797)
bones/5/rotation = Quaternion(-0.00420702, 0.117212, 0.0939117, 0.988648)
bones/7/rotation = Quaternion(-0.610687, -0.401161, 0.398869, -0.554107)
bones/8/position = Vector3(5.05964e-06, 14.6704, 5.486e-05)
bones/8/rotation = Quaternion(0.250341, -0.459907, 0.412249, 0.745564)
bones/9/position = Vector3(-1.31556e-06, 20.6401, -0.000129897)
bones/9/rotation = Quaternion(0.0445551, -0.000689602, 0.368938, 0.928385)
bones/10/position = Vector3(-1.35464e-05, 27.012, -0.000145063)
bones/10/rotation = Quaternion(0.0329468, -0.858854, -0.197049, 0.471653)
bones/11/position = Vector3(-2.96333, 3.62159, 1.49944)
bones/11/rotation = Quaternion(0.188396, 0.0970259, 0.139978, 0.967212)
bones/12/position = Vector3(-0.558528, 3.89124, 1.54967e-05)
bones/12/rotation = Quaternion(0.0154307, 0.165578, 0.0170042, 0.985929)
bones/13/position = Vector3(0.0380571, 3.18888, -7.88806e-06)
bones/13/rotation = Quaternion(-0.0283648, 0.00467506, 0.189406, 0.981478)
bones/14/position = Vector3(0.52046, 2.37028, -8.22544e-06)
bones/15/position = Vector3(-3.59069, 10.8949, -0.0932956)
bones/15/rotation = Quaternion(0.30357, 0.00324285, 0.01819, 0.95263)
bones/16/position = Vector3(0.00213218, 3.15756, 1.30988e-05)
bones/16/rotation = Quaternion(0.500163, -0.000340511, -0.0535322, 0.864275)
bones/17/position = Vector3(0.00214922, 3.02699, 3.10857e-05)
bones/17/rotation = Quaternion(0.210002, 8.67933e-05, -0.0236287, 0.977415)
bones/18/position = Vector3(-0.00427365, 2.6092, 1.77324e-06)
bones/19/position = Vector3(-1.21139, 11.1762, -0.312762)
bones/19/rotation = Quaternion(0.429091, 0.00196179, 0.00153398, 0.903258)
bones/20/position = Vector3(0.00388861, 3.2459, -1.04567e-05)
bones/20/rotation = Quaternion(0.534527, -0.000228821, -0.0606348, 0.842973)
bones/21/position = Vector3(-0.000784397, 3.18309, -2.72718e-05)
bones/21/rotation = Quaternion(0.15396, 7.88285e-05, -0.0177319, 0.987918)
bones/22/position = Vector3(-0.00311172, 2.69897, 2.22474e-05)
bones/23/position = Vector3(1.25747, 11.1393, -0.249346)
bones/23/rotation = Quaternion(0.495686, -0.00475287, -0.000861398, 0.868488)
bones/24/position = Vector3(0.000611544, 2.75163, 1.58848e-05)
bones/24/rotation = Quaternion(0.583779, 0.000100587, -0.0696627, 0.808919)
bones/25/position = Vector3(-0.00159502, 2.733, 5.50501e-05)
bones/25/rotation = Quaternion(0.222244, 2.17352e-05, -0.0259027, 0.974647)
bones/26/position = Vector3(0.000996828, 2.32575, 9.70066e-06)
bones/27/position = Vector3(3.54458, 11.1286, -0.1321)
bones/27/rotation = Quaternion(0.582478, -0.0432107, 0.0409026, 0.810666)
bones/28/position = Vector3(0.00204372, 2.2664, -4.8037e-06)
bones/28/rotation = Quaternion(0.527177, 0.000117555, -0.0638124, 0.847356)
bones/29/position = Vector3(-0.00262809, 1.87957, 2.19577e-07)
bones/29/rotation = Quaternion(0.121167, 0.000109133, -0.0135356, 0.99254)
bones/30/position = Vector3(0.000573158, 1.35246, -1.36793e-05)
bones/31/rotation = Quaternion(0.572117, -0.422307, 0.564759, 0.418791)
bones/32/position = Vector3(-4.709e-05, 14.6698, 0.000133898)
bones/32/rotation = Quaternion(0.443501, 0.0636933, -0.472035, 0.759231)
bones/33/position = Vector3(6.03543e-05, 20.7493, 1.48202e-05)
bones/33/rotation = Quaternion(0.0835266, 0.000777464, -0.794507, 0.601483)
bones/34/position = Vector3(-2.6441e-05, 27.0706, -0.000109697)
bones/34/rotation = Quaternion(-0.15145, 0.0976926, 0.38568, 0.904859)
bones/35/position = Vector3(2.77539, 3.38323, 1.34157)
bones/35/rotation = Quaternion(0.304017, -0.113173, -0.165932, 0.931253)
bones/36/position = Vector3(0.522785, 3.62404, -4.80562e-05)
bones/36/rotation = Quaternion(-0.078685, -0.176752, 0.16322, 0.967433)
bones/37/position = Vector3(0.00645638, 3.39217, -6.89974e-06)
bones/37/rotation = Quaternion(-0.182665, -0.0346872, 0.371943, 0.909444)
bones/38/position = Vector3(-0.529304, 2.81235, 4.3869e-05)
bones/39/position = Vector3(3.61525, 11.2449, -0.086466)
bones/39/rotation = Quaternion(0.0897216, 0.00102792, -0.0645317, 0.993874)
bones/40/position = Vector3(0.00111127, 3.12821, 2.7597e-05)
bones/40/rotation = Quaternion(0.282953, 5.02053e-06, 0.0226937, 0.958865)
bones/41/position = Vector3(-0.00105888, 2.8629, -1.21384e-05)
bones/41/rotation = Quaternion(0.256701, 4.8488e-05, 0.0210946, 0.966261)
bones/42/position = Vector3(-2.39909e-05, 2.48961, 1.20699e-06)
bones/43/position = Vector3(1.13636, 11.1711, -0.38039)
bones/43/rotation = Quaternion(0.414603, -0.0162943, 0.0247017, 0.909521)
bones/44/position = Vector3(-0.00497751, 3.3134, -5.65915e-06)
bones/44/rotation = Quaternion(0.818836, 0.000202849, 0.0733731, 0.569319)
bones/45/position = Vector3(0.00322229, 3.20895, -2.60046e-05)
bones/45/rotation = Quaternion(0.163182, -0.000137788, 0.0142909, 0.986493)
bones/46/position = Vector3(0.00173998, 2.74141, -3.46303e-05)
bones/47/position = Vector3(-1.30031, 11.305, -0.347622)
bones/47/rotation = Quaternion(0.462909, 0.0194048, -0.0356395, 0.885476)
bones/48/position = Vector3(0.0037725, 2.73694, -5.92834e-06)
bones/48/rotation = Quaternion(0.759828, -0.00153187, 0.074092, 0.645887)
bones/49/position = Vector3(0.00748913, 2.73448, -2.01874e-05)
bones/49/rotation = Quaternion(0.424376, 0.000603827, 0.0378174, 0.904696)
bones/50/position = Vector3(-0.0112463, 2.32243, 2.22027e-06)
bones/51/position = Vector3(-3.45116, 11.0546, -0.0651594)
bones/51/rotation = Quaternion(0.520767, 0.0257128, -0.0370606, 0.852507)
bones/52/position = Vector3(-0.00974774, 2.29563, -6.72338e-06)
bones/52/rotation = Quaternion(0.656609, 0.000978103, 0.0646786, 0.751452)
bones/53/position = Vector3(0.00192392, 1.87969, -3.22232e-05)
bones/53/rotation = Quaternion(0.496038, -0.00156843, 0.0492454, 0.866902)
bones/54/position = Vector3(0.00782937, 1.44152, -9.32813e-06)
bones/55/rotation = Quaternion(0.0839341, 0.0125756, 0.995699, 0.0371599)
bones/56/position = Vector3(-5.51937e-05, 40.3269, -1.42172e-05)
bones/56/rotation = Quaternion(-0.470864, 0.0203964, -0.00124036, 0.881969)
bones/57/rotation = Quaternion(0.263461, -0.0809529, -0.046723, 0.960131)
bones/58/rotation = Quaternion(0.393443, -0.0597547, 0.0189794, 0.917209)
bones/60/rotation = Quaternion(0.00756309, 0.458557, 0.883327, -0.0969594)
bones/61/position = Vector3(5.41972e-05, 40.3423, 2.55306e-07)
bones/61/rotation = Quaternion(-0.367337, -0.0109556, -0.0289669, 0.929572)
bones/62/rotation = Quaternion(0.492464, 0.136338, -0.133563, 0.849148)
bones/63/rotation = Quaternion(0.438855, 0.0638318, -0.018963, 0.896087)

[node name="AnimationPlayer" parent="enemymodel" index="1"]
autoplay = "Armature|mixamo_com|Layer0"

[node name="Pistol" parent="enemymodel" instance=ExtResource("2_u1s3k")]
transform = Transform3D(-0.435252, 0, 1.92928e-07, 0, 0.639167, 0, -3.80511e-08, 0, -2.20683, -0.0386105, 1.33318, 0.537808)
visible = false
script = SubResource("GDScript_t1skp")

[node name="MuzzleFlash" type="GPUParticles3D" parent="enemymodel/Pistol"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0588368, -0.313209)
emitting = false
amount = 1
lifetime = 0.25
one_shot = true
local_coords = true
process_material = SubResource("ParticleProcessMaterial_rw2b2")
draw_pass_1 = SubResource("PlaneMesh_8vdlg")

[node name="bullet_spawn" type="Node3D" parent="enemymodel/Pistol"]
transform = Transform3D(1, 2.64698e-23, 3.38813e-21, 0, 0.999962, -0.00872654, 0, 0.00872654, 0.999962, 0, 0, -0.438941)

[node name="enemyrifle" parent="." instance=ExtResource("5_fla7h")]
transform = Transform3D(0.0242919, -0.000162792, 0.00590574, -0.000341057, 0.0249102, 0.00208951, -0.00589813, -0.00211089, 0.0242024, 0.104136, 0.911454, -0.682338)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1.3, 0, 0, 0, 1.3, 0, 0, 0, 1.3, 0.00243455, 0.270049, 0)
shape = SubResource("CapsuleShape3D_q7x2r")

[node name="Timer" type="Timer" parent="."]
wait_time = 2.0
autostart = true

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]

[node name="health_pickup_spawn" type="Node3D" parent="."]

[node name="enemy" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("4_vk23e")
pitch_scale = 1.01

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_mudx8")
}

[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]

[editable path="enemymodel"]
