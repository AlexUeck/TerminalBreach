[gd_scene load_steps=16 format=3 uid="uid://5k1o5ctvtah6"]

[ext_resource type="Script" path="res://Scenes/Enemy/enemy.gd" id="1_phvpf"]
[ext_resource type="PackedScene" uid="uid://cssrnoqqr5d0y" path="res://models/enemymodel.blend" id="2_7mos3"]
[ext_resource type="PackedScene" uid="uid://cf1dcxwv6bvl3" path="res://models/Pistol.glb" id="2_u1s3k"]
[ext_resource type="Texture2D" uid="uid://vwob30tkwej4" path="res://addons/kenney_particle_pack/star_06.png" id="3_on872"]
[ext_resource type="AudioStream" uid="uid://cyp0dip0hu5qd" path="res://audio/gunshot.ogg" id="4_vk23e"]

[sub_resource type="GDScript" id="GDScript_t1skp"]
script/source = "extends Node3D

#@onready var nav_agent = $NavigationAgent3D

# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta: float) -> void:
	pass
"

[sub_resource type="Gradient" id="Gradient_or8bq"]
offsets = PackedFloat32Array(0, 0.141221, 1)
colors = PackedColorArray(0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_is51c"]
gradient = SubResource("Gradient_or8bq")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_rw2b2"]
angle_min = 45.0
angle_max = 45.0
gravity = Vector3(0, 0, 0)
color_ramp = SubResource("GradientTexture1D_is51c")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_4smqo"]
transparency = 1
shading_mode = 0
vertex_color_use_as_albedo = true
albedo_color = Color(1, 0.960784, 0.670588, 1)
albedo_texture = ExtResource("3_on872")
billboard_mode = 3
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false

[sub_resource type="PlaneMesh" id="PlaneMesh_8vdlg"]
material = SubResource("StandardMaterial3D_4smqo")
size = Vector2(0.5, 0.5)
orientation = 2

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_q7x2r"]

[sub_resource type="Animation" id="Animation_d17cx"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("enemymodel/Pistol:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(-0.0386105, 1.33318, 0.537808)]
}

[sub_resource type="Animation" id="Animation_30v3c"]
resource_name = "bob"
length = 0.75
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("enemymodel/Pistol:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.233333, 0.366667, 0.566667, 0.733333),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 0,
"values": [Vector3(-0.0386105, 1.27359, 0.537808), Vector3(-0.0386105, 1.30742, 0.537808), Vector3(-0.0386105, 1.22834, 0.495484), Vector3(-0.0541507, 1.34137, 0.53161), Vector3(-0.0386105, 1.27359, 0.537808)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_mudx8"]
_data = {
"RESET": SubResource("Animation_d17cx"),
"bob": SubResource("Animation_30v3c")
}

[node name="Enemy" type="CharacterBody3D" groups=["enemy"]]
script = ExtResource("1_phvpf")

[node name="enemymodel" parent="." instance=ExtResource("2_7mos3")]
transform = Transform3D(-1.3, 0, -1.1365e-07, 0, 1.3, 0, 1.1365e-07, 0, -1.3, 0, -0.80152, 0)

[node name="Skeleton3D" parent="enemymodel/Armature" index="0"]
bones/0/position = Vector3(0.149544, -0.067373, -84.3766)
bones/0/rotation = Quaternion(-0.644286, -0.101756, 0.0770905, 0.754055)
bones/1/rotation = Quaternion(0.0237593, -0.0367601, 0.0216096, 0.998808)
bones/2/rotation = Quaternion(0.031169, -0.0101208, -0.00166394, 0.999462)
bones/3/rotation = Quaternion(0.0310808, -0.0102757, -0.00178155, 0.999462)
bones/4/position = Vector3(2.38417e-07, 14.3081, 1.60153e-05)
bones/4/rotation = Quaternion(0.0976931, 0.031499, 0.0145008, 0.994612)
bones/5/rotation = Quaternion(-0.0234276, 0.147104, 0.10474, 0.983281)
bones/7/rotation = Quaternion(-0.565454, -0.443909, 0.463895, -0.517695)
bones/8/position = Vector3(5.05964e-06, 14.6704, 5.486e-05)
bones/8/rotation = Quaternion(0.235688, -0.434763, 0.523337, 0.693939)
bones/9/position = Vector3(-1.31556e-06, 20.6401, -0.000129897)
bones/9/rotation = Quaternion(0.0342104, -0.000711937, 0.28328, 0.958427)
bones/10/position = Vector3(-1.35464e-05, 27.012, -0.000145063)
bones/10/rotation = Quaternion(0.0636699, -0.861061, -0.183024, 0.47013)
bones/11/position = Vector3(-2.96333, 3.62159, 1.49944)
bones/11/rotation = Quaternion(0.189074, 0.0961833, 0.141906, 0.966883)
bones/12/position = Vector3(-0.558528, 3.89124, 1.54967e-05)
bones/12/rotation = Quaternion(0.0154307, 0.165578, 0.0170042, 0.985929)
bones/13/position = Vector3(0.0380571, 3.18888, -7.88806e-06)
bones/13/rotation = Quaternion(-0.0282532, 0.00441805, 0.188812, 0.981597)
bones/14/position = Vector3(0.52046, 2.37028, -8.22544e-06)
bones/15/position = Vector3(-3.59069, 10.8949, -0.0932956)
bones/15/rotation = Quaternion(0.30102, 0.00297723, 0.0192742, 0.953418)
bones/16/position = Vector3(0.00213218, 3.15756, 1.30988e-05)
bones/16/rotation = Quaternion(0.498528, -0.000339386, -0.0533572, 0.86523)
bones/17/position = Vector3(0.00214922, 3.02699, 3.10857e-05)
bones/17/rotation = Quaternion(0.208284, 8.60094e-05, -0.0234451, 0.977787)
bones/18/position = Vector3(-0.00427365, 2.6092, 1.77324e-06)
bones/19/position = Vector3(-1.21139, 11.1762, -0.312762)
bones/19/rotation = Quaternion(0.427436, 0.00174025, 0.0021922, 0.904041)
bones/20/position = Vector3(0.00388861, 3.2459, -1.04567e-05)
bones/20/rotation = Quaternion(0.535848, -0.000229523, -0.0607825, 0.842124)
bones/21/position = Vector3(-0.000784397, 3.18309, -2.72718e-05)
bones/21/rotation = Quaternion(0.155536, 7.99432e-05, -0.0179088, 0.987668)
bones/22/position = Vector3(-0.00311172, 2.69897, 2.22474e-05)
bones/23/position = Vector3(1.25747, 11.1393, -0.249346)
bones/23/rotation = Quaternion(0.495697, -0.00489556, -0.000608868, 0.868482)
bones/24/position = Vector3(0.000611544, 2.75163, 1.58848e-05)
bones/24/rotation = Quaternion(0.584783, 0.000100897, -0.0697817, 0.808183)
bones/25/position = Vector3(-0.00159502, 2.733, 5.50501e-05)
bones/25/rotation = Quaternion(0.222244, 2.17352e-05, -0.0259027, 0.974647)
bones/26/position = Vector3(0.000996828, 2.32575, 9.70066e-06)
bones/27/position = Vector3(3.54458, 11.1286, -0.1321)
bones/27/rotation = Quaternion(0.582402, -0.0431692, 0.0408657, 0.810724)
bones/28/position = Vector3(0.00204372, 2.2664, -4.8037e-06)
bones/28/rotation = Quaternion(0.529185, 0.000118152, -0.0640503, 0.846086)
bones/29/position = Vector3(-0.00262809, 1.87957, 2.19577e-07)
bones/29/rotation = Quaternion(0.123519, 0.000110181, -0.0138162, 0.992246)
bones/30/position = Vector3(0.000573158, 1.35246, -1.36793e-05)
bones/31/rotation = Quaternion(0.584969, -0.414739, 0.547226, 0.431679)
bones/32/position = Vector3(-4.709e-05, 14.6698, 0.000133898)
bones/32/rotation = Quaternion(0.434821, 0.0913515, -0.483683, 0.754079)
bones/33/position = Vector3(6.03543e-05, 20.7493, 1.48202e-05)
bones/33/rotation = Quaternion(0.0837477, 0.000773844, -0.79661, 0.598664)
bones/34/position = Vector3(-2.6441e-05, 27.0706, -0.000109697)
bones/34/rotation = Quaternion(-0.156508, 0.112034, 0.385384, 0.902459)
bones/35/position = Vector3(2.77539, 3.38323, 1.34157)
bones/35/rotation = Quaternion(0.304748, -0.111631, -0.169101, 0.93063)
bones/36/position = Vector3(0.522785, 3.62404, -4.80562e-05)
bones/36/rotation = Quaternion(-0.0794917, -0.175783, 0.15901, 0.968244)
bones/37/position = Vector3(0.00645638, 3.39217, -6.89974e-06)
bones/37/rotation = Quaternion(-0.183264, -0.0343607, 0.369472, 0.910343)
bones/38/position = Vector3(-0.529304, 2.81235, 4.3869e-05)
bones/39/position = Vector3(3.61525, 11.2449, -0.086466)
bones/39/rotation = Quaternion(0.094835, 0.00124728, -0.065775, 0.993317)
bones/40/position = Vector3(0.00111127, 3.12821, 2.7597e-05)
bones/40/rotation = Quaternion(0.282953, 5.02053e-06, 0.0226937, 0.958865)
bones/41/position = Vector3(-0.00105888, 2.8629, -1.21384e-05)
bones/41/rotation = Quaternion(0.256701, 4.8488e-05, 0.0210946, 0.966261)
bones/42/position = Vector3(-2.39909e-05, 2.48961, 1.20699e-06)
bones/43/position = Vector3(1.13636, 11.1711, -0.38039)
bones/43/rotation = Quaternion(0.417361, -0.0163917, 0.02487, 0.908253)
bones/44/position = Vector3(-0.00497751, 3.3134, -5.65915e-06)
bones/44/rotation = Quaternion(0.818788, 0.000202849, 0.0733689, 0.569389)
bones/45/position = Vector3(0.00322229, 3.20895, -2.60046e-05)
bones/45/rotation = Quaternion(0.163098, -0.00013773, 0.0142836, 0.986506)
bones/46/position = Vector3(0.00173998, 2.74141, -3.46303e-05)
bones/47/position = Vector3(-1.30031, 11.305, -0.347622)
bones/47/rotation = Quaternion(0.463437, 0.0187057, -0.0341768, 0.885273)
bones/48/position = Vector3(0.0037725, 2.73694, -5.92834e-06)
bones/48/rotation = Quaternion(0.759874, -0.00153197, 0.0740965, 0.645832)
bones/49/position = Vector3(0.00748913, 2.73448, -2.01874e-05)
bones/49/rotation = Quaternion(0.424376, 0.000603827, 0.0378174, 0.904696)
bones/50/position = Vector3(-0.0112463, 2.32243, 2.22027e-06)
bones/51/position = Vector3(-3.45116, 11.0546, -0.0651594)
bones/51/rotation = Quaternion(0.521047, 0.0251007, -0.0359786, 0.8524)
bones/52/position = Vector3(-0.00974774, 2.29563, -6.72338e-06)
bones/52/rotation = Quaternion(0.656714, 0.00097832, 0.0646884, 0.75136)
bones/53/position = Vector3(0.00192392, 1.87969, -3.22232e-05)
bones/53/rotation = Quaternion(0.496144, -0.00156878, 0.0492552, 0.866841)
bones/54/position = Vector3(0.00782937, 1.44152, -9.32813e-06)
bones/55/rotation = Quaternion(0.0892909, 0.298829, 0.949708, -0.0279689)
bones/56/position = Vector3(-5.51937e-05, 40.3269, -1.42172e-05)
bones/56/rotation = Quaternion(-0.780048, -0.0427597, 0.0128784, 0.624125)
bones/57/rotation = Quaternion(0.507876, -0.0649584, 0.0635444, 0.856624)
bones/58/rotation = Quaternion(0.358873, -0.0563363, 0.0193413, 0.931484)
bones/60/rotation = Quaternion(0.0537351, 0.355801, 0.927233, -0.103717)
bones/61/position = Vector3(5.41972e-05, 40.3423, 2.55306e-07)
bones/61/rotation = Quaternion(-0.581647, 0.0170227, -0.0484564, 0.811818)
bones/62/rotation = Quaternion(0.674412, 0.166957, -0.0643156, 0.71635)
bones/63/rotation = Quaternion(0.379545, 0.0578201, -0.0196993, 0.923155)

[node name="AnimationPlayer" parent="enemymodel" index="1"]
autoplay = "Armature|mixamo_com|Layer0"

[node name="Pistol" parent="enemymodel" instance=ExtResource("2_u1s3k")]
transform = Transform3D(-0.435252, 0, 1.92928e-07, 0, 0.639167, 0, -3.80511e-08, 0, -2.20683, -0.0386105, 1.33318, 0.537808)
script = SubResource("GDScript_t1skp")

[node name="MuzzleFlash" type="GPUParticles3D" parent="enemymodel/Pistol"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0588368, -0.313209)
emitting = false
amount = 1
lifetime = 0.25
one_shot = true
local_coords = true
process_material = SubResource("ParticleProcessMaterial_rw2b2")
draw_pass_1 = SubResource("PlaneMesh_8vdlg")

[node name="bullet_spawn" type="Node3D" parent="enemymodel/Pistol"]
transform = Transform3D(1, 2.64698e-23, 3.38813e-21, 0, 0.999962, -0.00872654, 0, 0.00872654, 0.999962, 0, 0, -0.438941)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1.3, 0, 0, 0, 1.3, 0, 0, 0, 1.3, 0, 0.270049, 0)
shape = SubResource("CapsuleShape3D_q7x2r")

[node name="Timer" type="Timer" parent="."]
wait_time = 2.0
autostart = true

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]

[node name="health_pickup_spawn" type="Node3D" parent="."]

[node name="enemy" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("4_vk23e")
pitch_scale = 1.01

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_mudx8")
}

[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]

[editable path="enemymodel"]
